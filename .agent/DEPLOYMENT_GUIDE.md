# SmartStudy AI - 网站部署方案

## 🎯 目标
将 SmartStudy AI 部署为公开网站，支持多用户访问

## 🏗️ 架构设计

### 方案选择：前后端分离架构

```
┌─────────────────┐
│   用户浏览器      │
└────────┬────────┘
         │ HTTPS
         ↓
┌─────────────────┐
│  前端 (Vercel)   │  ← React应用
│  - 静态资源      │
│  - 用户界面      │
└────────┬────────┘
         │ API调用
         ↓
┌─────────────────┐
│  后端 API        │  ← Express.js / Serverless Functions
│  - 认证系统      │
│  - API密钥管理   │
│  - Gemini调用    │
└────────┬────────┘
         │
         ↓
┌─────────────────┐
│  数据库 (选配)   │  ← PostgreSQL / MongoDB
│  - 用户数据      │
│  - 课程数据      │
└─────────────────┘
```

## 🚀 推荐技术栈

### 前端部署
- **平台**: Vercel (推荐) 或 Netlify
- **原因**: 
  - 免费托管
  - 自动HTTPS
  - CDN加速
  - Git集成，自动部署

### 后端部署
**选项1: Vercel Serverless Functions** (推荐 - 最简单)
- 与前端在同一平台
- 无需额外配置
- 按需计费，有免费额度

**选项2: Railway / Render**
- 更灵活的后端控制
- 支持长时间运行任务
- 免费层可用

### 数据库 (可选)
**选项1: 不使用数据库**
- 简单账号密码验证
- 课程数据存储在代码中
- 适合小规模使用

**选项2: Supabase** (推荐)
- PostgreSQL数据库
- 内置认证系统
- 免费层充足

## 📝 实施步骤

### 第一阶段：基础部署 (1-2天)

#### 1. 创建后端API服务

创建文件夹结构：
```
smart-study-pro/
├── frontend/          # React前端
├── api/              # 后端API
│   ├── auth.js       # 认证
│   ├── gemini.js     # Gemini API调用
│   └── index.js      # 主入口
└── vercel.json       # Vercel配置
```

#### 2. 移动API密钥到后端
- ❌ 前端不再直接调用Gemini API
- ✅ 前端调用自己的后端API
- ✅ 后端使用环境变量存储API密钥

#### 3. 添加简单认证
- 用户名/密码验证
- JWT token管理
- 基于session的访问控制

#### 4. 部署到Vercel
- 连接GitHub仓库
- 配置环境变量
- 一键部署

### 第二阶段：增强功能 (2-3天)

#### 1. 用户管理系统
- 注册/登录界面
- 用户个人资料
- 学习进度追踪

#### 2. 课程管理
- 管理员上传课程
- PDF文件云存储
- 课程权限控制

#### 3. 数据持久化
- 保存测验结果
- 学习历史记录
- 个性化推荐

## 💰 成本估算

### 免费方案 (推荐起步)
- **Vercel**: 免费托管
- **Supabase**: 500MB数据库，50k活跃用户/月
- **Gemini API**: 按使用量计费
- **总成本**: $0 - $10/月 (仅API调用费)

### 扩展方案 (100+用户)
- **Vercel Pro**: $20/月
- **Supabase Pro**: $25/月  
- **Gemini API**: $50-100/月
- **总成本**: ~$100/月

## 🔒 安全考虑

### 1. API密钥保护
```javascript
// ❌ 错误 - 前端暴露
const API_KEY = "your-api-key";

// ✅ 正确 - 后端环境变量
process.env.GEMINI_API_KEY
```

### 2. 用户认证
- 密码哈希 (bcrypt)
- JWT token有效期限制
- HTTPS强制

### 3. 速率限制
- 防止API滥用
- 每用户请求限制
- IP限流

## 📋 部署检查清单

### 准备阶段
- [ ] 注册Vercel账号
- [ ] 创建GitHub仓库
- [ ] 准备域名 (可选)
- [ ] 注册Gemini API Key

### 开发阶段  
- [ ] 重构前端，移除API密钥
- [ ] 创建后端API服务
- [ ] 实现认证系统
- [ ] 本地测试

### 部署阶段
- [ ] 推送代码到GitHub
- [ ] 连接Vercel
- [ ] 配置环境变量
- [ ] 测试生产环境
- [ ] 配置自定义域名 (可选)

### 上线后
- [ ] 监控API使用量
- [ ] 收集用户反馈
- [ ] 定期更新维护
- [ ] 备份数据

## 🎨 用户访问流程

```
1. 用户访问 https://smartstudy.your-domain.com
2. 显示登录页面
3. 输入账号密码（您提供的统一账号）
4. 验证通过后进入应用
5. 选择课程，开始学习
6. 所有AI功能正常使用
```

## 📊 推荐实施路径

### 最快上线方案 (1天)
1. 使用Vercel Serverless Functions
2. 简单密码认证（一个共享账号）
3. 不使用数据库
4. 部署完成！

### 标准方案 (3-5天)
1. 完整后端API
2. 用户注册/登录系统
3. Supabase数据库
4. 学习进度追踪

### 企业级方案 (1-2周)
1. 独立后端服务器
2. 完整用户管理
3. 管理员仪表盘
4. 数据分析和报表
5. 多课程支持
6. 负载均衡和缓存

## 🔗 推荐服务提供商

| 服务 | 提供商 | 免费额度 | 链接 |
|------|--------|----------|------|
| 前端托管 | Vercel | 100GB带宽/月 | vercel.com |
| 前端托管 | Netlify | 100GB带宽/月 | netlify.com |
| 后端部署 | Railway | $5免费额度 | railway.app |
| 数据库 | Supabase | 500MB | supabase.com |
| 数据库 | PlanetScale | 5GB | planetscale.com |
| 文件存储 | Cloudinary | 25GB | cloudinary.com |

## 🎯 下一步行动

想要开始部署吗？我可以帮您：

1. **创建后端API服务** - 我会创建Express.js后端代码
2. **设置认证系统** - 简单的用户名/密码验证
3. **配置Vercel部署** - 创建配置文件和部署文档
4. **提供详细步骤指南** - 手把手部署教程

您想从哪个开始？或者想了解更多某个方案的细节？

---

**建议**: 先从"最快上线方案"开始，基本功能上线后再逐步添加更多特性。这样可以快速验证想法，收集用户反馈。
